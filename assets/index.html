<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>The Big Man's Kanban Board</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'big-man': {
                            50: '#f0f9ff',
                            100: '#e0f2fe',
                            200: '#bae6fd',
                            300: '#7dd3fc',
                            400: '#38bdf8',
                            500: '#0ea5e9',
                            600: '#0284c7',
                            700: '#0369a1',
                            800: '#075985',
                            900: '#0c4a6e',
                        },
                    }
                }
            }
        }
    </script>
    <style>
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .glass {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .card-shadow {
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
        }
        
        .dragging {
            opacity: 0.5;
            transform: rotate(2deg);
        }
        
        .drag-over-top::before {
            content: '';
            position: absolute;
            top: -6px;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            border-radius: 2px;
            box-shadow: 0 0 8px rgba(102, 126, 234, 0.6);
            animation: pulse 1s ease-in-out infinite;
        }
        
        .drag-over-bottom::after {
            content: '';
            position: absolute;
            bottom: -6px;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            border-radius: 2px;
            box-shadow: 0 0 8px rgba(102, 126, 234, 0.6);
            animation: pulse 1s ease-in-out infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }
        
        .card {
            position: relative;
        }
        
        .tag {
            display: inline-block;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 9999px;
            padding: 2px 10px;
            margin-right: 4px;
            margin-bottom: 4px;
            font-size: 0.75rem;
            font-weight: 600;
        }
        
        .priority-low { border-left: 4px solid #10b981; }
        .priority-medium { border-left: 4px solid #f59e0b; }
        .priority-high { border-left: 4px solid #ef4444; }
        
        .column-container {
            min-height: 500px;
            display: flex;
            flex-direction: column;
            transition: all 0.3s ease;
        }
        
        .column-container:hover {
            transform: translateY(-2px);
        }
        
        .card-container {
            flex: 1;
            min-height: 450px;
        }
        
        .login-container {
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .stat-card {
            background: linear-gradient(135deg, rgba(255,255,255,0.2) 0%, rgba(255,255,255,0.05) 100%);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.3);
            transition: all 0.3s ease;
        }
        
        .stat-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 40px rgba(0,0,0,0.2);
        }
        
        /* Dark Mode Styles */
        .dark-mode body {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
        }
        
        .dark-mode .glass {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .dark-mode .stat-card {
            background: linear-gradient(135deg, rgba(0,0,0,0.4) 0%, rgba(0,0,0,0.2) 100%);
            border: 1px solid rgba(255,255,255,0.1);
        }
        
        .dark-mode .card-shadow {
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.5);
        }
        
        .dark-mode .column-container:hover {
            transform: translateY(-2px);
        }
        
        .dark-mode .tag {
            background: linear-gradient(135deg, #4a5568 0%, #2d3748 100%);
        }

        /* Calendar View Styles */
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 1px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            overflow: hidden;
        }

        .calendar-day {
            background: rgba(255, 255, 255, 0.1);
            min-height: 80px;
            padding: 4px;
            display: flex;
            flex-direction: column;
            cursor: pointer;
            transition: background 0.2s ease;
        }

        .calendar-day:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .calendar-day.other-month {
            background: rgba(255, 255, 255, 0.05);
            color: rgba(255, 255, 255, 0.4);
        }

        .calendar-day.today {
            background: rgba(102, 126, 234, 0.3);
            border: 2px solid rgba(102, 126, 234, 0.8);
        }

        .calendar-day-number {
            font-weight: 600;
            margin-bottom: 2px;
            font-size: 0.85rem;
        }

        .calendar-task-dots {
            display: flex;
            flex-wrap: wrap;
            gap: 2px;
            margin-top: auto;
        }

        .task-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            flex-shrink: 0;
        }

        .task-dot.high { background: #ef4444; }
        .task-dot.medium { background: #f59e0b; }
        .task-dot.low { background: #10b981; }

        .calendar-header {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            text-align: center;
            padding: 8px 0;
            background: rgba(255, 255, 255, 0.1);
            font-weight: 600;
            color: rgba(255, 255, 255, 0.8);
        }

        .calendar-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 16px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            margin-bottom: 12px;
        }

        .calendar-view-btn {
            padding: 6px 12px;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: none;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .calendar-view-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .calendar-view-btn.active {
            background: rgba(102, 126, 234, 0.6);
        }
        
        /* Mobile Responsive Styles */
        @media (max-width: 1024px) {
            .column-container {
                min-height: 300px;
            }
            .card-container {
                min-height: 250px;
            }
        }
        
        @media (max-width: 768px) {
            /* Stack columns vertically on mobile */
            .grid-cols-4 {
                grid-template-columns: 1fr;
            }
            
            /* Horizontal scroll for kanban board */
            #dashboard .grid-cols-4 {
                display: flex;
                flex-direction: row;
                overflow-x: auto;
                gap: 1rem;
                padding-bottom: 1rem;
                -webkit-overflow-scrolling: touch;
                scroll-snap-type: x mandatory;
            }
            
            #dashboard .grid-cols-4 > div {
                flex: 0 0 85vw;
                min-width: 280px;
                max-width: 320px;
                scroll-snap-align: start;
            }
            
            /* Smaller column containers */
            .column-container {
                min-height: 400px;
                max-height: 70vh;
            }
            
            .card-container {
                min-height: 300px;
                overflow-y: auto;
            }
            
            /* Touch-friendly header buttons */
            #dashboard button {
                min-height: 44px;
                min-width: 44px;
                padding: 0.5rem 1rem;
            }
            
            /* Collapsible columns for mobile */
            .column-container.collapsed .card-container {
                display: none;
            }
            
            .column-container.collapsed {
                min-height: auto;
            }
            
            .column-toggle {
                display: block;
                background: none;
                border: none;
                color: white;
                font-size: 1.2rem;
                cursor: pointer;
                min-width: 44px;
                min-height: 44px;
            }
            
            /* Mobile-optimized modals */
            #cardModal > div,
            #archiveModal > div,
            #exportModal > div,
            #importModal > div {
                width: 95vw;
                max-height: 90vh;
                margin: 1rem;
                padding: 1.5rem;
            }
            
            /* Larger touch targets for cards */
            .card {
                min-height: 44px;
                padding: 1rem;
            }
            
            /* Header adjustments */
            #dashboard .glass.rounded-2xl.p-6 {
                padding: 1rem;
            }
            
            #dashboard h1 {
                font-size: 1.5rem;
            }
            
            /* Touch-friendly form inputs */
            input, select, textarea, button {
                font-size: 16px; /* Prevents zoom on iOS */
            }
            
            /* Horizontal scrollbar styling */
            #dashboard .grid-cols-4::-webkit-scrollbar {
                height: 8px;
            }
            
            #dashboard .grid-cols-4::-webkit-scrollbar-track {
                background: rgba(255,255,255,0.1);
                border-radius: 4px;
            }
            
            #dashboard .grid-cols-4::-webkit-scrollbar-thumb {
                background: rgba(255,255,255,0.3);
                border-radius: 4px;
            }
        }
        
        @media (max-width: 480px) {
            /* Even smaller screens */
            #dashboard .grid-cols-4 > div {
                flex: 0 0 90vw;
            }
            
            .stat-card {
                padding: 0.75rem;
            }
            
            #dashboard .text-3xl {
                font-size: 1.5rem;
            }
            
            /* Stack header buttons */
            #dashboard .flex.gap-3 {
                flex-wrap: wrap;
                gap: 0.5rem;
            }
            
            #dashboard button {
                font-size: 0.875rem;
                padding: 0.5rem;
            }
        }
        
        /* Touch device optimizations */
        @media (hover: none) and (pointer: coarse) {
            .card:hover {
                transform: none;
            }
            
            .card:active {
                transform: scale(0.98);
            }
            
            .column-container:hover {
                transform: none;
            }
            
            /* Larger touch targets */
            .card {
                touch-action: pan-y;
            }
        }
        
        /* Landscape mode on mobile */
        @media (max-height: 500px) and (orientation: landscape) {
            .column-container {
                max-height: 80vh;
            }
            
            #dashboard .grid-cols-4 > div {
                flex: 0 0 40vw;
            }
        }
    </style>
</head>
<body class="font-sans">
    
    <!-- Login Screen -->
    <div id="loginScreen" class="hidden fixed inset-0 flex items-center justify-center p-4">
        <div class="login-container glass rounded-3xl p-8 max-w-md w-full card-shadow">
            <div class="text-center mb-8">
                <h1 class="text-4xl font-bold text-white mb-2">üè¥ The Big Man</h1>
                <p class="text-white/80">Kanban Board - Task Management</p>
            </div>
            
            <form id="loginForm" class="space-y-6">
                <div>
                    <label class="block text-white/90 text-sm font-semibold mb-2">Password</label>
                    <input 
                        type="password" 
                        id="passwordInput" 
                        class="w-full px-4 py-3 rounded-xl bg-white/20 border border-white/30 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/50 focus:border-transparent"
                        placeholder="Enter your password"
                        autocomplete="current-password"
                    >
                </div>
                
                <button 
                    type="submit" 
                    class="w-full bg-white text-purple-700 py-3 px-6 rounded-xl font-bold hover:bg-white/90 transition-all transform hover:scale-105"
                >
                    Login
                </button>
                
                <div id="loginError" class="hidden bg-red-500/20 border border-red-500/50 text-white px-4 py-3 rounded-xl text-sm"></div>
            </form>
            
            <div class="mt-6 text-center text-white/60 text-sm">
                <p>Find password in OpenClaw config</p>
            </div>
        </div>
    </div>

    <!-- Main Dashboard -->
    <div id="dashboard" class="hidden container mx-auto px-4 py-6">
        <!-- Header -->
        <div class="glass rounded-2xl p-6 mb-6 card-shadow">
            <div class="flex justify-between items-center">
                <div>
                    <h1 class="text-4xl font-bold text-white mb-1">üè¥ The Big Man's Kanban</h1>
                    <p class="text-white/70">Nae pish, pure practical work</p>
                </div>
                <div class="flex gap-3">
                    <button id="themeToggleBtn" class="bg-gray-700 text-white py-2 px-4 rounded-xl font-semibold hover:bg-gray-600 transition-all" title="Toggle Dark Mode">
                        üåô
                    </button>
                    <button id="filterToggleBtn" class="bg-purple-500/80 text-white py-2 px-4 rounded-xl font-semibold hover:bg-purple-600 transition-all" title="Toggle Filters">
                        üîç Filters
                    </button>
                    <button id="addCardBtn" class="bg-white text-purple-700 py-2 px-6 rounded-xl font-semibold hover:bg-white/90 transition-all transform hover:scale-105">
                        + Add Task
                    </button>
                    <button id="exportBtn" class="bg-yellow-500 text-white py-2 px-6 rounded-xl font-semibold hover:bg-yellow-600 transition-all transform hover:scale-105">
                        üì• Export
                    </button>
                    <button id="importBtn" class="bg-green-500 text-white py-2 px-6 rounded-xl font-semibold hover:bg-green-600 transition-all transform hover:scale-105">
                        üì§ Import
                    </button>
                    <button id="archiveBtn" class="bg-blue-500 text-white py-2 px-6 rounded-xl font-semibold hover:bg-blue-600 transition-all transform hover:scale-105">
                        üì¶ Archive
                    </button>
                    <button id="logoutBtn" class="bg-red-500/80 text-white py-2 px-4 rounded-xl font-semibold hover:bg-red-600 transition-all">
                        üîì Logout
                    </button>
                </div>
            </div>
        </div>

        <!-- View Toggle -->
        <div class="flex justify-between items-center mb-4">
            <div class="flex gap-2 bg-white/10 rounded-xl p-1">
                <button id="kanbanViewBtn" class="calendar-view-btn active">üìä Kanban</button>
                <button id="calendarViewBtn" class="calendar-view-btn">üìÖ Calendar</button>
            </div>
        </div>

        <!-- Filter Bar -->
        <div id="filterBar" class="glass rounded-2xl p-4 mb-6 card-shadow hidden">
            <div class="flex flex-wrap gap-3 items-center mb-3">
                <!-- Search Input -->
                <div class="flex-1 min-w-[200px]">
                    <div class="relative">
                        <span class="absolute left-3 top-1/2 -translate-y-1/2 text-white/60">üîç</span>
                        <input 
                            type="text" 
                            id="searchInput" 
                            placeholder="Search tasks..." 
                            class="w-full pl-10 pr-4 py-2 rounded-xl bg-white/20 border border-white/30 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/50"
                        >
                    </div>
                </div>
                
                <!-- Priority Filter -->
                <select id="priorityFilter" class="px-4 py-2 rounded-xl bg-white/20 border border-white/30 text-white focus:outline-none focus:ring-2 focus:ring-white/50 cursor-pointer">
                    <option value="" class="text-gray-800">All Priorities</option>
                    <option value="low" class="text-gray-800">Low Priority</option>
                    <option value="medium" class="text-gray-800">Medium Priority</option>
                    <option value="high" class="text-gray-800">High Priority</option>
                </select>
                
                <!-- Column Filter -->
                <select id="columnFilter" class="px-4 py-2 rounded-xl bg-white/20 border border-white/30 text-white focus:outline-none focus:ring-2 focus:ring-white/50 cursor-pointer">
                    <option value="" class="text-gray-800">All Columns</option>
                    <option value="backlog" class="text-gray-800">üìã Backlog</option>
                    <option value="todo" class="text-gray-800">üìù To Do</option>
                    <option value="in-progress" class="text-gray-800">üöß In Progress</option>
                    <option value="done" class="text-gray-800">‚úÖ Done</option>
                </select>
                
                <!-- Schedule Filter -->
                <select id="scheduleFilter" class="px-4 py-2 rounded-xl bg-white/20 border border-white/30 text-white focus:outline-none focus:ring-2 focus:ring-white/50 cursor-pointer">
                    <option value="" class="text-gray-800">All Types</option>
                    <option value="once" class="text-gray-800">One-time</option>
                    <option value="heartbeat" class="text-gray-800">Recurring (üíì)</option>
                    <option value="cron" class="text-gray-800">Scheduled (‚è∞)</option>
                </select>
                
                <!-- Due Date Filter -->
                <select id="dueDateFilter" class="px-4 py-2 rounded-xl bg-white/20 border border-white/30 text-white focus:outline-none focus:ring-2 focus:ring-white/50 cursor-pointer">
                    <option value="" class="text-gray-800">Any Due Date</option>
                    <option value="overdue" class="text-gray-800">‚ö†Ô∏è Overdue</option>
                    <option value="today" class="text-gray-800">üìÖ Today</option>
                    <option value="this-week" class="text-gray-800">üìÜ This Week</option>
                    <option value="this-month" class="text-gray-800">üìà This Month</option>
                </select>
                
                <!-- Subtasks Filter -->
                <select id="subtasksFilter" class="px-4 py-2 rounded-xl bg-white/20 border border-white/30 text-white focus:outline-none focus:ring-2 focus:ring-white/50 cursor-pointer">
                    <option value="" class="text-gray-800">Any Subtasks</option>
                    <option value="has-subtasks" class="text-gray-800">Has Subtasks</option>
                    <option value="all-complete" class="text-gray-800">All Complete</option>
                    <option value="none-complete" class="text-gray-800">None Complete</option>
                </select>

                <!-- Clear Filters Button -->
                <button id="clearFiltersBtn" class="bg-white/20 text-white py-2 px-4 rounded-xl font-semibold hover:bg-white/30 transition-all flex items-center gap-2">
                    ‚ùå Clear Filters
                </button>
            </div>
            
            <!-- Tags Filter -->
            <div id="tagsFilterContainer" class="flex flex-wrap gap-2 items-center">
                <span class="text-white/70 text-sm font-semibold">Tags:</span>
                <div id="availableTags" class="flex flex-wrap gap-2">
                    <!-- Tags will be populated dynamically -->
                </div>
            </div>
            
            <!-- Results Count & Active Filters -->
            <div class="flex justify-between items-center mt-3 pt-3 border-t border-white/10">
                <div id="resultsCount" class="text-white/70 text-sm">
                    Showing all <span id="totalCardCount" class="font-bold text-white">0</span> tasks
                </div>
                <div id="activeFilters" class="flex flex-wrap gap-2">
                    <!-- Active filter pills will be shown here -->
                </div>
            </div>
        </div>

        <!-- Kanban Board -->
        <div id="kanbanBoard" class="grid grid-cols-4 gap-4">
            <!-- Empty State -->
            <div id="emptyFilterState" class="hidden col-span-4 text-center py-16">
                <div class="glass rounded-2xl p-8 mx-auto max-w-md">
                    <span class="text-6xl mb-4 block">üîç</span>
                    <h3 class="text-2xl font-bold text-white mb-2">No tasks found</h3>
                    <p class="text-white/70 mb-4">No tasks match your current filters.</p>
                    <button id="clearFiltersEmptyBtn" class="bg-white text-purple-700 py-2 px-6 rounded-xl font-semibold hover:bg-white/90 transition-all">
                        Clear Filters
                    </button>
                </div>
            </div>
            <!-- Backlog Column -->
            <div class="column-container glass rounded-2xl p-4 card-shadow">
                <h2 class="text-xl font-bold text-white mb-4 pb-3 border-b border-white/20">üìã Backlog</h2>
                <div class="card-container space-y-3" data-column="backlog"></div>
            </div>
            
            <!-- To Do Column -->
            <div class="column-container glass rounded-2xl p-4 card-shadow">
                <h2 class="text-xl font-bold text-white mb-4 pb-3 border-b border-white/20">üìù To Do</h2>
                <div class="card-container space-y-3" data-column="todo"></div>
            </div>
            
            <!-- In Progress Column -->
            <div class="column-container glass rounded-2xl p-4 card-shadow">
                <h2 class="text-xl font-bold text-white mb-4 pb-3 border-b border-white/20">üöß In Progress</h2>
                <div class="card-container space-y-3" data-column="in-progress"></div>
            </div>
            
            <!-- Done Column -->
            <div class="column-container glass rounded-2xl p-4 card-shadow">
                <h2 class="text-xl font-bold text-white mb-4 pb-3 border-b border-white/20">‚úÖ Done</h2>
                <div class="card-container space-y-3" data-column="done"></div>
            </div>
        </div>

        <!-- Calendar View -->
        <div id="calendarView" class="hidden">
            <div class="glass rounded-2xl p-6 card-shadow">
                <!-- Calendar Navigation -->
                <div class="calendar-nav mb-4">
                    <button id="prevMonthBtn" class="text-white hover:text-white/80 transition-all text-xl">‚Üê</button>
                    <h2 id="calendarMonthYear" class="text-2xl font-bold text-white">February 2026</h2>
                    <button id="nextMonthBtn" class="text-white hover:text-white/80 transition-all text-xl">‚Üí</button>
                    <button id="todayBtn" class="bg-white/20 text-white py-2 px-4 rounded-lg font-semibold hover:bg-white/30 transition-all ml-4">Today</button>
                </div>

                <!-- Calendar Header -->
                <div class="calendar-header">
                    <div>Sun</div>
                    <div>Mon</div>
                    <div>Tue</div>
                    <div>Wed</div>
                    <div>Thu</div>
                    <div>Fri</div>
                    <div>Sat</div>
                </div>

                <!-- Calendar Grid -->
                <div id="calendarGrid" class="calendar-grid">
                    <!-- Days will be rendered here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Calendar Day Modal -->
    <div id="calendarDayModal" class="fixed inset-0 bg-black/60 backdrop-blur-sm hidden items-center justify-center z-50 p-4">
        <div class="glass rounded-3xl p-6 w-full max-w-lg max-h-[80vh] overflow-y-auto card-shadow">
            <div class="flex justify-between items-center mb-4">
                <h3 id="calendarDayTitle" class="text-2xl font-bold text-white">Tasks for Feb 11</h3>
                <button id="closeCalendarDayModal" class="text-white/60 hover:text-white text-2xl">√ó</button>
            </div>
            <div id="calendarDayTasks" class="space-y-3">
                <!-- Tasks for selected day -->
            </div>
        </div>
    </div>

    <!-- Card Modal -->
    <div id="cardModal" class="fixed inset-0 bg-black/60 backdrop-blur-sm hidden items-center justify-center z-50 p-4">
        <div class="glass rounded-3xl p-8 w-full max-w-2xl max-h-[90vh] overflow-y-auto card-shadow">
            <h3 id="modalTitle" class="text-3xl font-bold text-white mb-6">Add Task</h3>
            <input type="hidden" id="cardIdInput">
            <input type="hidden" id="cardCurrentColumn">
            
            <div class="space-y-5">
                <div>
                    <label class="block text-white/90 text-sm font-semibold mb-2">Title</label>
                    <input type="text" id="cardTitleInput" class="w-full px-4 py-3 rounded-xl bg-white/20 border border-white/30 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/50">
                </div>
                
                <div>
                    <label class="block text-white/90 text-sm font-semibold mb-2">Description</label>
                    <textarea id="cardDescriptionInput" class="w-full px-4 py-3 rounded-xl bg-white/20 border border-white/30 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/50" rows="4"></textarea>
                </div>
                
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-white/90 text-sm font-semibold mb-2">Priority</label>
                        <select id="cardPriorityInput" class="w-full px-4 py-3 rounded-xl bg-white/90 border border-white/30 text-gray-800 focus:outline-none focus:ring-2 focus:ring-purple-500">
                            <option value="low">Low</option>
                            <option value="medium" selected>Medium</option>
                            <option value="high">High</option>
                        </select>
                    </div>
                    
                    <div>
                        <label class="block text-white/90 text-sm font-semibold mb-2">Due Date</label>
                        <input type="date" id="cardDueDateInput" class="w-full px-4 py-3 rounded-xl bg-white/90 border border-white/30 text-gray-800 focus:outline-none focus:ring-2 focus:ring-purple-500">
                    </div>
                </div>
                
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-white/90 text-sm font-semibold mb-2">Schedule Type</label>
                        <select id="cardScheduleInput" class="w-full px-4 py-3 rounded-xl bg-white/90 border border-white/30 text-gray-800 focus:outline-none focus:ring-2 focus:ring-purple-500">
                            <option value="once" selected>Once - One-time task</option>
                            <option value="heartbeat">Heartbeat - Recurring</option>
                            <option value="cron">Cron - Scheduled</option>
                        </select>
                    </div>
                    
                    <div>
                        <label class="block text-white/90 text-sm font-semibold mb-2">Starting Column</label>
                        <select id="cardColumnInput" class="w-full px-4 py-3 rounded-xl bg-white/90 border border-white/30 text-gray-800 focus:outline-none focus:ring-2 focus:ring-purple-500">
                            <option value="backlog" selected>üìã Backlog</option>
                            <option value="todo">üìù To Do</option>
                            <option value="in-progress">üöß In Progress</option>
                            <option value="done">‚úÖ Done</option>
                        </select>
                    </div>
                </div>
                
                <div id="cronExpressionDiv" class="hidden">
                    <label class="block text-white/90 text-sm font-semibold mb-2">Cron Expression</label>
                    <input type="text" id="cardCronInput" class="w-full px-4 py-3 rounded-xl bg-white/20 border border-white/30 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/50" placeholder="0 9 * * * (9 AM daily)">
                    <p class="text-white/60 text-xs mt-1">Examples: "0 9 * * *" (9 AM daily), "0 */6 * * *" (every 6 hours)</p>
                </div>
                
                <div>
                    <label class="block text-white/90 text-sm font-semibold mb-2">Tags (comma-separated)</label>
                    <input type="text" id="cardTagsInput" class="w-full px-4 py-3 rounded-xl bg-white/20 border border-white/30 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/50">
                </div>
            </div>
            
            <!-- Subtasks Section -->
            <div class="mt-6 border-t border-white/20 pt-6">
                <div class="flex justify-between items-center mb-3">
                    <h4 class="text-white/90 text-lg font-semibold">‚úÖ Subtasks</h4>
                    <span id="subtaskProgress" class="text-white/70 text-sm"></span>
                </div>
                <div id="subtasksContainer" class="space-y-2 mb-4 max-h-48 overflow-y-auto">
                    <!-- Subtasks will be populated here -->
                </div>
                <div class="flex gap-2">
                    <input type="text" id="newSubtaskInput" placeholder="Add a subtask..." class="flex-1 px-4 py-2 rounded-xl bg-white/20 border border-white/30 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/50">
                    <button id="addSubtaskBtn" class="bg-white/30 text-white py-2 px-4 rounded-xl font-semibold hover:bg-white/40 transition-all">
                        ‚ûï
                    </button>
                </div>
            </div>

            <!-- Comments Section -->
            <div class="mt-6 border-t border-white/20 pt-6">
                <h4 class="text-white/90 text-lg font-semibold mb-3">üí¨ Comments</h4>
                <div id="commentsContainer" class="space-y-3 mb-4 max-h-48 overflow-y-auto">
                    <!-- Comments will be populated here -->
                </div>
                <div class="flex gap-2">
                    <input type="text" id="newCommentInput" placeholder="Add a comment..." class="flex-1 px-4 py-2 rounded-xl bg-white/20 border border-white/30 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/50">
                    <button id="addCommentBtn" class="bg-white/30 text-white py-2 px-4 rounded-xl font-semibold hover:bg-white/40 transition-all">
                        ‚ûï
                    </button>
                </div>
            </div>

            <!-- Tracking Section -->
            <div class="mt-6 border-t border-white/20 pt-6">
                <div class="flex justify-between items-center mb-3">
                    <h4 class="text-white/90 text-lg font-semibold">üìä Tracking</h4>
                    <button id="addTrackingBtn" class="bg-white/30 text-white py-1 px-3 rounded-lg font-semibold hover:bg-white/40 transition-all text-sm">
                        ‚ûï Add Entry
                    </button>
                </div>
                <div id="trackingSummary" class="grid grid-cols-2 gap-4 mb-4">
                    <div class="bg-white/10 rounded-xl p-3 text-center">
                        <div class="text-white/70 text-xs font-semibold mb-1">Total Tokens</div>
                        <div id="trackingTokens" class="text-2xl font-bold text-white">0</div>
                    </div>
                    <div class="bg-white/10 rounded-xl p-3 text-center">
                        <div class="text-white/70 text-xs font-semibold mb-1">Total Cost</div>
                        <div id="trackingCost" class="text-2xl font-bold text-green-400">$0.00</div>
                    </div>
                </div>
                <div id="trackingExecutions" class="space-y-2 max-h-32 overflow-y-auto text-sm">
                    <!-- Tracking entries will be populated here -->
                </div>
            </div>

            <!-- Add Tracking Entry Modal (hidden by default) -->
            <div id="trackingEntryModal" class="hidden fixed inset-0 bg-black/60 backdrop-blur-sm items-center justify-center z-50 p-4">
                <div class="glass rounded-3xl p-6 w-full max-w-md card-shadow">
                    <h4 class="text-white/90 text-lg font-semibold mb-4">Add Tracking Entry</h4>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-white/90 text-sm font-semibold mb-2">Tokens</label>
                            <input type="number" id="trackingTokensInput" class="w-full px-4 py-3 rounded-xl bg-white/20 border border-white/30 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/50" placeholder="0">
                        </div>
                        <div>
                            <label class="block text-white/90 text-sm font-semibold mb-2">Cost (USD)</label>
                            <input type="number" step="0.01" id="trackingCostInput" class="w-full px-4 py-3 rounded-xl bg-white/20 border border-white/30 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/50" placeholder="0.00">
                        </div>
                        <div>
                            <label class="block text-white/90 text-sm font-semibold mb-2">Notes (optional)</label>
                            <input type="text" id="trackingNotesInput" class="w-full px-4 py-3 rounded-xl bg-white/20 border border-white/30 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/50" placeholder="Execution details...">
                        </div>
                        <div class="flex gap-3">
                            <button id="saveTrackingBtn" class="flex-1 bg-green-500 text-white py-3 px-6 rounded-xl font-semibold hover:bg-green-600 transition-all">
                                Save
                            </button>
                            <button id="cancelTrackingBtn" class="bg-white/20 text-white py-3 px-6 rounded-xl font-semibold hover:bg-white/30 transition-all">
                                Cancel
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- SubAgents Section -->
            <div class="mt-6 border-t border-white/20 pt-6">
                <div class="flex justify-between items-center mb-3">
                    <h4 class="text-white/90 text-lg font-semibold">ü§ñ SubAgents</h4>
                    <div class="flex gap-2">
                        <button id="executeAllSubagentsBtn" class="hidden bg-green-500 text-white py-1 px-3 rounded-lg font-semibold hover:bg-green-600 transition-all text-sm">
                            üöÄ Execute All
                        </button>
                        <button id="planSubagentsBtn" class="bg-purple-500 text-white py-1 px-3 rounded-lg font-semibold hover:bg-purple-600 transition-all text-sm">
                            üìã Plan Task
                        </button>
                    </div>
                </div>
                <div id="subagentsContainer" class="space-y-3">
                    <!-- Subagent plans will be populated here -->
                </div>
            </div>

            <!-- SubAgent Plan Modal -->
            <div id="subagentPlanModal" class="hidden fixed inset-0 bg-black/60 backdrop-blur-sm items-center justify-center z-50 p-4">
                <div class="glass rounded-3xl p-6 w-full max-w-2xl max-h-[80vh] overflow-y-auto card-shadow">
                    <h4 class="text-white/90 text-xl font-semibold mb-4">üìã Plan SubAgents</h4>
                    <div id="subagentPlanContent" class="space-y-4">
                        <!-- Plan content will be populated here -->
                    </div>
                    <div class="flex gap-3 mt-6">
                        <button id="executePlanBtn" class="flex-1 bg-purple-500 text-white py-3 px-6 rounded-xl font-semibold hover:bg-purple-600 transition-all">
                            üöÄ Execute Plan
                        </button>
                        <button id="cancelPlanBtn" class="bg-white/20 text-white py-3 px-6 rounded-xl font-semibold hover:bg-white/30 transition-all">
                            Cancel
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="flex gap-3 mt-8">
                <button id="saveCardBtn" class="flex-1 bg-green-500 text-white py-3 px-6 rounded-xl font-semibold hover:bg-green-600 transition-all transform hover:scale-105">
                    Save
                </button>
                <button id="archiveCardBtn" class="bg-blue-500 text-white py-3 px-6 rounded-xl font-semibold hover:bg-blue-600 transition-all">
                    üì¶ Archive
                </button>
                <button id="deleteCardBtn" class="bg-red-500 text-white py-3 px-6 rounded-xl font-semibold hover:bg-red-600 transition-all">
                    Delete
                </button>
                <button id="cancelCardBtn" class="bg-white/20 text-white py-3 px-6 rounded-xl font-semibold hover:bg-white/30 transition-all">
                    Cancel
                </button>
            </div>
        </div>
    </div>

    <!-- Archive Modal -->
    <div id="archiveModal" class="fixed inset-0 bg-black/60 backdrop-blur-sm hidden items-center justify-center z-50 p-4">
        <div class="glass rounded-3xl p-8 w-full max-w-4xl max-h-[90vh] overflow-y-auto card-shadow">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-3xl font-bold text-white">üì¶ Archive</h3>
                <div class="flex gap-2">
                    <button id="archiveAllDoneBtn" class="bg-blue-500 text-white py-2 px-4 rounded-xl font-semibold hover:bg-blue-600 transition-all text-sm">
                        Archive All Done
                    </button>
                    <button id="clearArchiveBtn" class="bg-red-500 text-white py-2 px-4 rounded-xl font-semibold hover:bg-red-600 transition-all text-sm">
                        Clear Archive
                    </button>
                    <button id="closeArchiveBtn" class="bg-white/20 text-white py-2 px-4 rounded-xl font-semibold hover:bg-white/30 transition-all">
                        Close
                    </button>
                </div>
            </div>
            
            <div id="archiveList" class="space-y-3">
                <!-- Archive items will be populated here -->
            </div>
            
            <div id="archiveEmpty" class="hidden text-center text-white/60 py-12">
                <p class="text-xl">Archive is empty</p>
                <p class="text-sm mt-2">Completed tasks will appear here after archiving</p>
            </div>
        </div>
    </div>

    <!-- Export Modal -->
    <div id="exportModal" class="fixed inset-0 bg-black/60 backdrop-blur-sm hidden items-center justify-center z-50 p-4">
        <div class="glass rounded-3xl p-8 w-full max-w-md card-shadow">
            <h3 class="text-3xl font-bold text-white mb-6">üì• Export Board</h3>
            
            <div class="space-y-4">
                <button id="exportJsonBtn" class="w-full bg-blue-500 text-white py-4 px-6 rounded-xl font-semibold hover:bg-blue-600 transition-all transform hover:scale-105">
                    üìÑ Export as JSON
                </button>
                <button id="exportCsvBtn" class="w-full bg-green-500 text-white py-4 px-6 rounded-xl font-semibold hover:bg-green-600 transition-all transform hover:scale-105">
                    üìä Export as CSV
                </button>
            </div>
            
            <button id="closeExportBtn" class="w-full mt-6 bg-white/20 text-white py-3 px-6 rounded-xl font-semibold hover:bg-white/30 transition-all">
                Close
            </button>
        </div>
    </div>

    <!-- Import Modal -->
    <div id="importModal" class="fixed inset-0 bg-black/60 backdrop-blur-sm hidden items-center justify-center z-50 p-4">
        <div class="glass rounded-3xl p-8 w-full max-w-md card-shadow">
            <h3 class="text-3xl font-bold text-white mb-6">üì§ Import Tasks</h3>
            
            <div class="space-y-4">
                <div>
                    <label class="block text-white/90 text-sm font-semibold mb-2">Select JSON file</label>
                    <input 
                        type="file" 
                        id="importFileInput" 
                        accept=".json"
                        class="w-full px-4 py-3 rounded-xl bg-white/20 border border-white/30 text-white file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:bg-white/30 file:text-white hover:file:bg-white/40 file:cursor-pointer"
                    >
                </div>
                
                <button id="importJsonBtn" class="w-full bg-green-500 text-white py-4 px-6 rounded-xl font-semibold hover:bg-green-600 transition-all transform hover:scale-105">
                    üì§ Import from JSON
                </button>
                
                <div id="importStatus" class="hidden bg-green-500/20 border border-green-500/50 text-white px-4 py-3 rounded-xl text-sm"></div>
                <div id="importError" class="hidden bg-red-500/20 border border-red-500/50 text-white px-4 py-3 rounded-xl text-sm"></div>
            </div>
            
            <button id="closeImportBtn" class="w-full mt-6 bg-white/20 text-white py-3 px-6 rounded-xl font-semibold hover:bg-white/30 transition-all">
                Close
            </button>
        </div>
    </div>

    <script src="/kanban/app.js"></script>
</body>
</html>
